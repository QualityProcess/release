<app-navbar></app-navbar>

<sub-navbar title="{{ project.name }}" classes="matrix-sub-navbar" class="sub-navbar">
  <!--<button mat-button class="add-btn" [routerLink]="['/disciplines', 'create']">
    <mdc-icon>add</mdc-icon>
  </button>-->
</sub-navbar>

<div class="loading" *ngIf="!loaded; else matrix"><mat-spinner></mat-spinner></div>


<ng-template #matrix>
  <div class="outer-wrapper">
    <div class="wrapper" [draggable]>
      <table class="table">
        <thead class="table-header">
          <tr>
            <th class="cell"></th>
            <th class="cell discipline-header"*ngFor="let item of data.row_headers; let i = index;">{{ item }}</th>
          </tr>
        </thead>
        <tbody class="table-body">
          <tr class="table-body-row" *ngFor="let design_stage of data.columns; let rowIndex = index;">
            <td class="cell design-stage-header">{{data.column_headers[rowIndex]}}</td>
            <td class="cell matrix-box" *ngFor="let data of design_stage.data; let i = index">
              <div class="created-design-stage circle" *ngIf="data.table.value; else create" [routerLink]="['/tasks', data.table.value.id]">
                  <mat-icon>{{ disciplineNames[i].icon }}</mat-icon>
              </div> 
              <ng-template #create>
                <div class="create-design-stage circle" [routerLink]="['/tasks', 'create', {projectId: project.id,discipline: data.table.discipline, designStage: design_stage.header}]"><mat-icon>{{ disciplineNames[i].icon }}</mat-icon></div>
              </ng-template>
            </td>
          </tr> 
        </tbody>
      </table>
    </div>
  </div>
</ng-template>

<ng-template #matrix1>
  <div class="outer-wrapper">
    <div class="wrapper" [draggable]>

      
      <div class="matrix-grid-row-headers">
        <div class="discipline-header matrix-box divider"></div>
        <div class="design-stage-header matrix-box" *ngFor="let item of data.column_headers; let i = index;">
          <span>{{ item }}</span>
        </div> 
      </div>

      <div class="matrix-grid">
        <div class="matrix-grid-body">
          <div class="discipline-header matrix-box" *ngFor="let item of data.row_headers; let i = index;">
              <span>{{ item }}</span>
          </div>
          <div class="matrix-box" *ngFor="let item of data.source_data; let i = index">
            <span>{{ data.source_data[i].table.value}}</span>
          </div> 
        </div>
      </div>
     </div>
  </div>
</ng-template>
